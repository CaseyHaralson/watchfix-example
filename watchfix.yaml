# watchfix.yaml
# Generated by watchfix init

project:
  name: watchfix-example
  root: .

agent:
  provider: claude
  timeout: 5m
  retries: 2
  # command: claude
  # args:
  #   - --model
  #   - sonnet
  #   - --dangerously-skip-permissions
  #   - -p
  # stderr_is_progress: false

logs:
  sources:
    - name: frontend
      type: file
      path: ./frontend.log
    - name: backend
      type: file
      path: ./backend.log

  # Example docker source:
  # - name: api
  #   type: docker
  #   container: my-app-api

  # Example command source:
  # - name: compose
  #   type: command
  #   run: docker-compose logs --tail=100
  #   interval: 30s

  context_lines_before: 10
  context_lines_after: 5
  max_line_buffer: 10000

verification:
  test_commands:
    - cd backend && npm test
    - cd frontend && npm test
  test_command_timeout: 5m
  health_checks:
    - http://localhost:3000
  health_check_timeout: 10s
  wait_after_fix: 5s

limits:
  max_attempts_per_error: 3

cleanup:
  context_max_age_days: 7
  context_max_size_kb: 256

patterns:
  match:
    - "FATAL:"
    - "panic:"
    - "[FRONTEND ERROR]"
  ignore:
    - "DeprecationWarning"
    - "ExperimentalWarning"
